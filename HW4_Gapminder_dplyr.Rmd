---
title: "HW4 Tidy data and joins"
output: 
  github_document
---
## Pre-Work

#### Load packages

Load the necessary package (assuming you have installed them)
```{r message=FALSE}
library(dplyr)
library(gapminder)
library(ggplot2)
library(tidyr)
library(countrycode)
library(geonames)
```


## Problem 1: You have data in one “shape” but you wish it were in another.

#### - Activity #2

Make a tibble with one row per year and columns for life expectancy for two or more countries.
```{r  results='asis'}
tbl1.2 <- 
  gapminder %>%
  filter(country %in% c("United States", "China", "Canada")) %>%
  select(country, year, lifeExp)
knitr::kable(tbl1.2)

tbl1.2 %>%
  ggplot(aes(x = year, y = lifeExp, color = country)) +
  geom_point() +
  ggtitle("Scatterplot of lifeExp vs year for country Canada, China, and United States")
```

#### -Activity #3 Compute median of life expectancy for all possible combinations of continent and year. 

```{r  results='asis'}
tbl1.3 <- 
  gapminder %>%
  group_by(continent, year) %>%
  summarise(median = median(lifeExp))
knitr::kable(tbl1.3)

tbl1.3 %>%
  ggplot(aes(x = year, y = median, group = continent, color = continent)) +
  geom_line() + geom_point() + 
  ggtitle("The median of lifeExp trend for five continents")
```

## Problem 2: Join, merge, look up

#### - Activity #1

```{r}

  knitr::kable()
```


```{r}
countryT <- read.table("https://raw.githubusercontent.com/vincentarelbundock/Rdatasets/master/csv/Ecdat/incidents.byCountryYr.csv", sep = ",", header =T)
head(countryT)
```

## 1.Get the maximum and minimum of GDP per capita for all continents.

#### Create a second data frame, complementary to Gapminder

```{r results='asis'}
tbl1 <- 
  gapminder %>% 
  group_by(continent) %>% 
  summarise(minGDP = min(gdpPercap), medianGDP = median(gdpPercap), maxGDP = max(gdpPercap))
knitr::kable(tbl1)
```


---
title: "HW4"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


As I have some experience with ggplot and dplyr. So I firstly tried to tackle the problems without reviewing any materials. However, when I tried the following code, I got an error. The error stucks me a few minutes, so I went back to the course materials, and found out I misplaced `filter` and `select`. I did not pay much attention to the difference before, but now I have clearer idea and won't make the same mistakes next time.  

```{r}
gapminder %>%
  select(country %in% c("United States", "China", "Canada")) %>%
  itler(country, year, lifeExp)
```

Error in country %in% c("United States", "China", "Canada") : 
  object 'country' not found